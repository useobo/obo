# ============================================================================
# OBO (On Behalf Of) - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your values.
#
# Provider Authentication Modes:
# - OAuth: Provider has OAuth device flow, requires CLIENT_ID + CLIENT_SECRET
# - BYOC:  "Bring Your Own Credential" - paste API keys/tokens in the 'reason' field
# - Genesis: Provider can create credentials via API (future for some providers)
#
# Providers marked [OPTIONAL] work in BYOC mode without OAuth credentials.
# ============================================================================

# -----------------------------------------------------------------------------
# DATABASE
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://user@localhost:5432/obo

# -----------------------------------------------------------------------------
# SERVER
# -----------------------------------------------------------------------------
PORT=3001

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Encryption key for token storage (AES-256-GCM)
# REQUIRED for production. Generate with: openssl rand -base64 32
OBO_ENCRYPTION_KEY=dev-key-change-me-in-production

# Enable encryption at rest for tokens (default: true)
OBO_ENCRYPT_AT_REST=true

# Enable one-time token delivery (stores only hash, non-retrievable after first delivery)
OBO_ONE_TIME_DELIVERY=false

# JWT secret for OBO provider tokens
# For key rotation, use numbered keys (_1 is primary, _2 is secondary, etc.)
# Generate with: openssl rand -base64 32
OBO_JWT_SECRET_1=dev-jwt-secret-key-1-change-me
OBO_JWT_SECRET_2=dev-jwt-secret-key-2-rotation

# =============================================================================
# PROVIDER CONFIGURATION
# =============================================================================

# -----------------------------------------------------------------------------
# OBO CALLBACK URL (for PKCE OAuth flows)
# -----------------------------------------------------------------------------
# Set this to your public OBO instance URL.
# Providers will redirect to: https://your-domain.com/callback/{service}
# Example: https://useobo.com/callback
OBO_CALLBACK_URL=

# -----------------------------------------------------------------------------
# GitHub [OPTIONAL - OAuth Device Flow]
# -----------------------------------------------------------------------------
# Create OAuth App: https://github.com/settings/developers
# - Application name: OBO
# - Homepage URL: http://localhost:3000
# - Callback URL: (not used for device flow)
# - Enable: Device Authorization Flow
#
# If not provided, GitHub works in BYOC mode (paste a PAT in 'reason' field)
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# Stripe [OPTIONAL - PKCE OAuth Flow]
# -----------------------------------------------------------------------------
# Create OAuth App: https://dashboard.stripe.com/settings/applications
# - Redirect URL: https://your-domain.com/callback/stripe
#
# If not provided, Stripe works in BYOC mode (paste API key in 'reason' field)
STRIPE_CLIENT_ID=
STRIPE_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# Atlassian [OPTIONAL - PKCE OAuth Flow]
# -----------------------------------------------------------------------------
# Create OAuth App: https://developer.atlassian.com/console/
# - Callback URL: https://your-domain.com/callback/atlassian
ATLASSIAN_CLIENT_ID=
ATLASSIAN_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# Discord [OPTIONAL - PKCE OAuth Flow]
# -----------------------------------------------------------------------------
# Create OAuth App: https://discord.com/developers/applications
# - Redirect URL: https://your-domain.com/callback/discord
DISCORD_CLIENT_ID=
DISCORD_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# Spotify [OPTIONAL - PKCE OAuth Flow]
# -----------------------------------------------------------------------------
# Create OAuth App: https://developer.spotify.com/dashboard
# - Redirect URL: https://your-domain.com/callback/spotify
SPOTIFY_CLIENT_ID=
SPOTIFY_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# Hugging Face [OPTIONAL - OAuth Device Flow]
# -----------------------------------------------------------------------------
# Create OAuth App: https://huggingface.co/settings/connected-applications
#
# If not provided, Hugging Face works in BYOC mode (paste HF token in 'reason' field)
HUGGINGFACE_CLIENT_ID=
HUGGINGFACE_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# Twitch [REQUIRED - OAuth Device Flow]
# -----------------------------------------------------------------------------
# Create Application: https://dev.twitch.tv/console
# - OAuth Redirect URL: (not used for device flow)
# - Category: Application Integration
TWITCH_CLIENT_ID=
TWITCH_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# Strava [REQUIRED - OAuth Device Flow]
# -----------------------------------------------------------------------------
# Create OAuth App: https://www.strava.com/settings/api
# - Application Type: Other
# - Callback Domain: localhost
# - Approval Prompt: Auto
STRAVA_CLIENT_ID=
STRAVA_CLIENT_SECRET=

# =============================================================================
# BYOC-ONLY PROVIDERS (No OAuth, paste credentials in 'reason' field)
# =============================================================================

# -----------------------------------------------------------------------------
# OpenAI [BYOC Only]
# -----------------------------------------------------------------------------
# Paste API key (starts with sk-) in the 'reason' field when requesting a slip
# Get your key: https://platform.openai.com/api-keys

# -----------------------------------------------------------------------------
# Google Cloud [BYOC Only]
# -----------------------------------------------------------------------------
# Paste service account key JSON in the 'reason' field when requesting a slip
# Create SA key: https://console.cloud.google.com/iam-admin/serviceaccounts

# -----------------------------------------------------------------------------
# Slack [BYOC Only]
# -----------------------------------------------------------------------------
# Paste bot token (xoxb-) in the 'reason' field when requesting a slip
# Get your token: https://api.slack.com/apps

# -----------------------------------------------------------------------------
# Linear [BYOC Only]
# -----------------------------------------------------------------------------
# Paste API key (lin_api_) in the 'reason' field when requesting a slip
# Get your key: https://linear.app/settings/api

# -----------------------------------------------------------------------------
# Notion [BYOC Only]
# -----------------------------------------------------------------------------
# Paste integration token (secret_) in the 'reason' field when requesting a slip
# Get your token: https://www.notion.so/my-integrations

# -----------------------------------------------------------------------------
# Vercel [BYOC Only]
# -----------------------------------------------------------------------------
# Paste API token in the 'reason' field when requesting a slip
# Get your token: https://vercel.com/account/tokens

# -----------------------------------------------------------------------------
# Supabase [BYOC + Rogue Mode]
# -----------------------------------------------------------------------------
# Configure in your project's API settings
SUPABASE_URL=
SUPABASE_ANON_KEY=

# =============================================================================
# WEB DASHBOARD (Optional - for web UI)
# =============================================================================

# Clerk Authentication
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=
CLERK_SECRET_KEY=
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up
